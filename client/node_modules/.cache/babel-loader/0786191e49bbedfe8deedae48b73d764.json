{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Jo\\xE3o Pedro/Dropbox/VisualStudioCode/PortfolioWebsite/projects/PERN-Restaurant-Finder/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Jo\\xE3o Pedro/Dropbox/VisualStudioCode/PortfolioWebsite/projects/PERN-Restaurant-Finder/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from'react';import{useParams,Link}from'react-router-dom';import{useGlobalContext}from'../globalContext';import axios from'../apis/axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateRestaurantForm=function UpdateRestaurantForm(){var _useParams=useParams(),id=_useParams.id;var _useGlobalContext=useGlobalContext(),restaurantName=_useGlobalContext.restaurantName,setRestaurantName=_useGlobalContext.setRestaurantName,restaurantLocation=_useGlobalContext.restaurantLocation,setRestaurantLocation=_useGlobalContext.setRestaurantLocation,restaurantPriceRange=_useGlobalContext.restaurantPriceRange,setRestaurantPriceRange=_useGlobalContext.setRestaurantPriceRange;// Need to fetch the data inside this component.\n// Otherwise, if the user copy and paste the URL\n// in other tab, the browser won't be able to find the data.\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/\".concat(id));case 3:response=_context.sent;setRestaurantName(response.data.restaurant.name);setRestaurantLocation(response.data.restaurant.location);setRestaurantPriceRange(response.data.restaurant.price_range);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var handleUpdate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.prev=1;_context2.next=4;return axios.put(\"/\".concat(id),{name:restaurantName,location:restaurantLocation,price_range:restaurantPriceRange});case 4:_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[1,6]]);}));return function handleUpdate(_x){return _ref2.apply(this,arguments);};}();//rendering component\nreturn/*#__PURE__*/_jsxs(\"form\",{className:\"w-full flex flex-col gap-8 rounded py-6 mt-6 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"restaurantName\",children:\"Restaurant name:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"appearance-none shadow w-full                                              \\r border border-gray-400 hover:border-blue-400 rounded\\r px-1 py-2 \\r text-gray-700 leading-tight\\r focus:outline-none focus:shadow-outline\",id:\"restaurantName\",type:\"text\",placeholder:\"Restaurant name\",maxLength:15,value:restaurantName,onChange:function onChange(event){return setRestaurantName(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"restaurantLocation\",children:\"Location:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"appearance-none shadow w-full                                           \\r border border-gray-400 hover:border-blue-400 rounded\\r px-1 py-2 \\r text-gray-700 leading-tight\\r focus:outline-none focus:shadow-outline\",id:\"restaurantLocation\",type:\"text\",placeholder:\"Location\",maxLength:15,value:restaurantLocation,onChange:function onChange(event){return setRestaurantLocation(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"restaurantPriceRange\",children:\"Price Range:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"appearance-none shadow w-full\\r border border-gray-400 hover:border-blue-400 rounded\\r px-1 py-2 \\r text-gray-700 leading-tight\\r focus:outline-none focus:shadow-outline\",id:\"restaurantPriceRange\",value:restaurantPriceRange,onChange:function onChange(event){return setRestaurantPriceRange(event.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Price Range\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"$\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"$$\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"$$$\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"$$$$\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"$$$$$\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-evenly mx-5\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"rounded w-28\\r bg-blue-500 hover:bg-blue-700 text-white\\r font-bold\\r px-1 py-2              \\r focus:outline-none focus:shadow-outline\",type:\"submit\",onClick:function onClick(event){return handleUpdate(event);},children:\"Update\"}),/*#__PURE__*/_jsx(\"button\",{className:\"rounded w-28\\r bg-blue-500 hover:bg-blue-700 text-white\\r font-bold\\r px-1 py-2\\r focus:outline-none focus:shadow-outline\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Back Home\"})})]})]});};export default UpdateRestaurantForm;","map":{"version":3,"names":["React","useEffect","useParams","Link","useGlobalContext","axios","UpdateRestaurantForm","id","restaurantName","setRestaurantName","restaurantLocation","setRestaurantLocation","restaurantPriceRange","setRestaurantPriceRange","fetchData","get","response","data","restaurant","name","location","price_range","console","log","handleUpdate","event","preventDefault","put","target","value"],"sources":["C:/Users/JoÃ£o Pedro/Dropbox/VisualStudioCode/PortfolioWebsite/projects/PERN-Restaurant-Finder/client/src/components/UpdateRestaurantForm.jsx"],"sourcesContent":["\r\nimport React, { useEffect } from 'react'\r\nimport { useParams, Link } from 'react-router-dom'\r\nimport { useGlobalContext } from '../globalContext'\r\nimport axios from '../apis/axios'\r\n\r\n\r\nconst UpdateRestaurantForm = () => {\r\n    const { id } = useParams()\r\n    const {\r\n        restaurantName, setRestaurantName,\r\n        restaurantLocation, setRestaurantLocation,\r\n        restaurantPriceRange, setRestaurantPriceRange,\r\n    } = useGlobalContext()\r\n\r\n    // Need to fetch the data inside this component.\r\n    // Otherwise, if the user copy and paste the URL\r\n    // in other tab, the browser won't be able to find the data.\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await axios.get(`/${id}`)\r\n                setRestaurantName(response.data.restaurant.name)\r\n                setRestaurantLocation(response.data.restaurant.location)\r\n                setRestaurantPriceRange(response.data.restaurant.price_range)\r\n\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n        fetchData()\r\n    }, [])\r\n\r\n    const handleUpdate = async event => {\r\n        event.preventDefault()\r\n        try {\r\n            await axios.put(`/${id}`, {\r\n                name: restaurantName,\r\n                location: restaurantLocation,\r\n                price_range: restaurantPriceRange\r\n            })\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    //rendering component\r\n    return (\r\n        <form className=\"w-full flex flex-col gap-8 rounded py-6 mt-6 text-sm\">\r\n            <div className='w-full'>\r\n                <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"restaurantName\">\r\n                    Restaurant name:\r\n                </label>\r\n                <input\r\n                    className=\"appearance-none shadow w-full                                              \r\n                            border border-gray-400 hover:border-blue-400 rounded\r\n                            px-1 py-2 \r\n                            text-gray-700 leading-tight\r\n                            focus:outline-none focus:shadow-outline\"\r\n                    id='restaurantName'\r\n                    type=\"text\"\r\n                    placeholder=\"Restaurant name\"\r\n                    maxLength={15}\r\n                    value={restaurantName}\r\n                    onChange={event => setRestaurantName(event.target.value)}\r\n                />\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"restaurantLocation\">\r\n                    Location:\r\n                </label>\r\n                <input\r\n                    className=\"appearance-none shadow w-full                                           \r\n                            border border-gray-400 hover:border-blue-400 rounded\r\n                            px-1 py-2 \r\n                            text-gray-700 leading-tight\r\n                            focus:outline-none focus:shadow-outline\"\r\n                    id='restaurantLocation'\r\n                    type=\"text\"\r\n                    placeholder=\"Location\"\r\n                    maxLength={15}\r\n                    value={restaurantLocation}\r\n                    onChange={event => setRestaurantLocation(event.target.value)}\r\n                />\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"restaurantPriceRange\">\r\n                    Price Range:\r\n                </label>      \r\n                <select\r\n                    className=\"appearance-none shadow w-full\r\n                        border border-gray-400 hover:border-blue-400 rounded\r\n                        px-1 py-2 \r\n                        text-gray-700 leading-tight\r\n                        focus:outline-none focus:shadow-outline\"\r\n                    id='restaurantPriceRange'\r\n                    value={restaurantPriceRange}\r\n                    onChange={event => setRestaurantPriceRange(event.target.value)}\r\n                >\r\n                    <option>Price Range</option>\r\n                    <option value=\"1\">$</option>\r\n                    <option value=\"2\">$$</option>\r\n                    <option value=\"3\">$$$</option>\r\n                    <option value=\"4\">$$$$</option>\r\n                    <option value=\"5\">$$$$$</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className='flex justify-evenly mx-5'>\r\n                <button\r\n                    className=\"rounded w-28\r\n                            bg-blue-500 hover:bg-blue-700 text-white\r\n                            font-bold\r\n                            px-1 py-2              \r\n                            focus:outline-none focus:shadow-outline\"\r\n                    type=\"submit\"\r\n                    onClick={event => handleUpdate(event)}\r\n                >\r\n                    Update\r\n                </button>\r\n\r\n                <button className=\"rounded w-28\r\n                            bg-blue-500 hover:bg-blue-700 text-white\r\n                            font-bold\r\n                            px-1 py-2\r\n                            focus:outline-none focus:shadow-outline\">\r\n                    <Link to={`/`}>\r\n                        Back Home\r\n                    </Link>\r\n                </button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default UpdateRestaurantForm"],"mappings":"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"},"metadata":{},"sourceType":"module"}