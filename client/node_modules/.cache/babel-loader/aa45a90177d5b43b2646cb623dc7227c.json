{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Jo\\xE3o Pedro/Dropbox/VisualStudioCode/PortfolioWebsite/projects/PERN-Restaurant-Finder/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Jo\\xE3o Pedro/Dropbox/VisualStudioCode/PortfolioWebsite/projects/PERN-Restaurant-Finder/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useContext,useCallback}from'react';import RestaurantFinder from'../apis/RestaurantFinder';//from axios to fetch the data\nimport{RestaurantsContext}from'../context/restaurantsContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RestaurantList=function RestaurantList(){var _useContext=useContext(RestaurantsContext),restaurants=_useContext.restaurants,setRestaurants=_useContext.setRestaurants;useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return RestaurantFinder.get('/');case 3:response=_context.sent;setRestaurants(response.data.data.restaurants);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[restaurants]);// The data fetching above has an infinite loop.\n// Tried to fix that with useCallback below, but did not work.\n// const fetchData = useCallback(async () => {\n//     console.log(restaurants)\n//         try {\n//             const response = await RestaurantFinder.get('/')\n//             setRestaurants(response.data.data.restaurants)\n//         } catch (error) {\n//             console.log(error)\n//         }\n//     }, [restaurants])\n//     useEffect(() => {\n//         fetchData()\n//     }, [restaurants, fetchData])\nvar handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return RestaurantFinder.delete(\"/\".concat(id));case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"header-tr\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"Restaurant\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price Range\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ratings\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:restaurants&&restaurants.map(function(restaurant){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:restaurant.name}),/*#__PURE__*/_jsx(\"td\",{children:restaurant.location}),/*#__PURE__*/_jsx(\"td\",{children:'$'.repeat(restaurant.price_range)}),/*#__PURE__*/_jsx(\"td\",{children:\"reviews\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"edit-button\",children:\"Edit\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:function onClick(){return handleDelete(restaurant.id);},children:\"Delete\"})})]},restaurant.id);})})]})});};export default RestaurantList;","map":{"version":3,"names":["React","useEffect","useContext","useCallback","RestaurantFinder","RestaurantsContext","RestaurantList","restaurants","setRestaurants","fetchData","get","response","data","console","log","handleDelete","id","delete","map","restaurant","name","location","repeat","price_range"],"sources":["C:/Users/JoÃ£o Pedro/Dropbox/VisualStudioCode/PortfolioWebsite/projects/PERN-Restaurant-Finder/client/src/components/RestaurantList.jsx"],"sourcesContent":["import React, {useEffect, useContext, useCallback} from 'react'\r\nimport RestaurantFinder from '../apis/RestaurantFinder' //from axios to fetch the data\r\nimport {RestaurantsContext} from '../context/restaurantsContext'\r\n\r\nconst RestaurantList = () => {\r\n    const {restaurants, setRestaurants} = useContext(RestaurantsContext)\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await RestaurantFinder.get('/')\r\n                setRestaurants(response.data.data.restaurants)\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n        fetchData()\r\n    }, [restaurants])\r\n\r\n    // The data fetching above has an infinite loop.\r\n    // Tried to fix that with useCallback below, but did not work.\r\n    // const fetchData = useCallback(async () => {\r\n    //     console.log(restaurants)\r\n    //         try {\r\n    //             const response = await RestaurantFinder.get('/')\r\n    //             setRestaurants(response.data.data.restaurants)\r\n    //         } catch (error) {\r\n    //             console.log(error)\r\n    //         }\r\n    //     }, [restaurants])\r\n    //     useEffect(() => {\r\n    //         fetchData()\r\n    //     }, [restaurants, fetchData])\r\n        \r\n\r\n    const handleDelete = async id => {\r\n        try {\r\n            await RestaurantFinder.delete(`/${id}`)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <section>\r\n            <table>\r\n                <thead>\r\n                    <tr className='header-tr'>\r\n                        <th>Restaurant</th>\r\n                        <th>Location</th>\r\n                        <th>Price Range</th>\r\n                        <th>Ratings</th>\r\n                        <th>Edit</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {restaurants && restaurants.map(restaurant => {\r\n                        return (\r\n                        <tr key={restaurant.id}>\r\n                            <td>{restaurant.name}</td>\r\n                            <td>{restaurant.location}</td>\r\n                            <td>{'$'.repeat(restaurant.price_range)}</td>\r\n                            <td>reviews</td>\r\n                            <td>\r\n                                <button\r\n                                    className=\"edit-button\"\r\n                                >\r\n                                    Edit\r\n                                </button>\r\n                            </td>\r\n                            <td>\r\n                                <button\r\n                                    className=\"delete-button\"\r\n                                    onClick={() => handleDelete(restaurant.id)}\r\n                                >\r\n                                    Delete\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                        )                        \r\n                    })}\r\n                </tbody>\r\n            </table>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default RestaurantList"],"mappings":"0YAAA,MAAOA,MAAP,EAAeC,SAAf,CAA0BC,UAA1B,CAAsCC,WAAtC,KAAwD,OAAxD,CACA,MAAOC,iBAAP,KAA6B,0BAA7B,CAAwD;AACxD,OAAQC,kBAAR,KAAiC,+BAAjC,C,wFAEA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,EAAM,CACzB,gBAAsCJ,UAAU,CAACG,kBAAD,CAAhD,CAAOE,WAAP,aAAOA,WAAP,CAAoBC,cAApB,aAAoBA,cAApB,CAEAP,SAAS,CAAC,UAAM,CACZ,GAAMQ,UAAS,4FAAG,wLAEaL,iBAAgB,CAACM,GAAjB,CAAqB,GAArB,CAFb,QAEJC,QAFI,eAGVH,cAAc,CAACG,QAAQ,CAACC,IAAT,CAAcA,IAAd,CAAmBL,WAApB,CAAd,CAHU,+EAKVM,OAAO,CAACC,GAAR,cALU,oEAAH,kBAATL,UAAS,0CAAf,CAQAA,SAAS,GACZ,CAVQ,CAUN,CAACF,WAAD,CAVM,CAAT,CAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA,GAAMQ,aAAY,6FAAG,kBAAMC,EAAN,gKAEPZ,iBAAgB,CAACa,MAAjB,YAA4BD,EAA5B,EAFO,0FAIbH,OAAO,CAACC,GAAR,eAJa,qEAAH,kBAAZC,aAAY,6CAAlB,CAQA,mBACI,sCACI,sCACI,oCACI,YAAI,SAAS,CAAC,WAAd,wBACI,kCADJ,cAEI,gCAFJ,cAGI,mCAHJ,cAII,+BAJJ,cAKI,4BALJ,cAMI,8BANJ,GADJ,EADJ,cAWI,uBACKR,WAAW,EAAIA,WAAW,CAACW,GAAZ,CAAgB,SAAAC,UAAU,CAAI,CAC1C,mBACA,mCACI,oBAAKA,UAAU,CAACC,IAAhB,EADJ,cAEI,oBAAKD,UAAU,CAACE,QAAhB,EAFJ,cAGI,oBAAK,IAAIC,MAAJ,CAAWH,UAAU,CAACI,WAAtB,CAAL,EAHJ,cAII,+BAJJ,cAKI,iCACI,eACI,SAAS,CAAC,aADd,kBADJ,EALJ,cAYI,iCACI,eACI,SAAS,CAAC,eADd,CAEI,OAAO,CAAE,yBAAMR,aAAY,CAACI,UAAU,CAACH,EAAZ,CAAlB,EAFb,oBADJ,EAZJ,GAASG,UAAU,CAACH,EAApB,CADA,CAuBH,CAxBe,CADpB,EAXJ,GADJ,EADJ,CA2CH,CAlFD,CAoFA,cAAeV,eAAf"},"metadata":{},"sourceType":"module"}